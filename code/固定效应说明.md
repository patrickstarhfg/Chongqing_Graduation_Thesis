# 固定效应 (Fixed Effects) 科普指南
——行业固定效应与年份固定效应详解

在面板数据回归分析（Panel Data Regression）中，我们经常会看到“控制了行业固定效应和年份固定效应”这句话。这到底是啥意思？为什么要做这个？数据去哪里找？

---

## 1. 什么是固定效应？

简单来说，固定效应就是**把那些“看不见、摸不着”但又确实会影响结果的因素，通通控制住**。

### (1) 年份固定效应 (Year Fixed Effects)
*   **含义**：控制随时间变化但对所有企业影响相同的宏观因素。
*   **例子**：
    *   2020年爆发了疫情，所有企业的业绩都受影响。
    *   2018年发生了贸易战，全行业出口都受挫。
    *   通货膨胀、宏观经济周期等。
*   **怎么做**：在回归方程里加入一组年份的虚拟变量（Dummy Variables）。比如数据有 2016-2024 年，就加 8 个 0/1 变量（基准年除外）。
*   **代码实现**：`C(Year)`

### (2) 行业固定效应 (Industry Fixed Effects)
*   **含义**：控制不随时间变化（或变化很慢）的行业特有属性。
*   **例子**：
    *   互联网行业天生 TFP 就比钢铁行业高。
    *   金融行业的负债率天生就比制造业高。
    *   行业的竞争格局、技术壁垒等。
*   **怎么做**：在回归方程里加入一组行业的虚拟变量。比如按证监会行业分类，有“制造业”、“信息技术业”等。
*   **代码实现**：`C(IndustryCode)`

---

## 2. 为什么要加固定效应？

如果你不加，审稿人会挑战你：
> “你的结果显著，是不是因为你选的样本里刚好这几年经济好？”（未控制年份）
> “你的结果显著，是不是因为你选的样本里全是互联网公司？”（未控制行业）

加了固定效应，就相当于告诉大家：
**“即使排除了宏观经济波动的影响，排除了行业天生的差异，我的核心解释变量（数字化转型）依然对 TFP 有显著影响！”**
这会让你的结论更加**纯粹**和**可信**。

---

## 3. 怎么找这个数据？

你不需要去专门“找”固定效应的数据，因为它们就藏在你的基础数据里！

### (1) 年份数据
*   **来源**：你的 `final_data.csv` 里已经有了 `Year` 这一列。
*   **用法**：直接用这一列生成虚拟变量即可。

### (2) 行业数据
*   **来源**：通常在下载 CSMAR 数据时，比如下载《上市公司基本信息表》或《财务报表》时，会有一个字段叫 **“行业代码” (Indcd)** 或 **“行业名称” (Indnme)**。
*   **现状检查**：
    *   我在你的 `final_data.csv` 里暂时没看到明确的 `Industry` 字段。
    *   但是！我在 `tfp_data` 文件夹下的 `STK_CompanyStaff.xlsx` 或 `FS_Comins.xlsx` 的表头里好像没看到，得去**上市公司基本信息表 (`DM_ListedCoInfoAnlY.xlsx`)** 里找找。
*   **补救措施**：
    1.  打开 `d:\SHLT\cqgs\cqbylw\上市公司基本信息(年)141052855\DM_ListedCoInfoAnlY.xlsx`。
    2.  确认里面有没有 `IndustryCode` (行业代码，如 C27, I64) 这一列。
    3.  如果有，下次重新处理数据时，把它也 `merge` 进来。

---

## 4. 总结

*   **年份固定效应**：已有 (`Year`)。
*   **行业固定效应**：**缺**。需要从 `上市公司基本信息表` 中把“行业代码”这一列合并进来。

等你把新的控制变量数据准备好（放到 `control_data_new`），我们可以顺便把行业代码也加进去，这样你的回归模型就完美了！✨
