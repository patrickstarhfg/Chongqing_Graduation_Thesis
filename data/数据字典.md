# 数据字典 (Data Dictionary)
——基于 `final_data.csv` 清洗结果

本文件详细解释了最终合并数据集中的所有变量及其来源、计算方式和单位。

---

## 1. 基础信息 (Basic Information)

| 变量名 | 含义 | 类型 | 来源文件 | 处理说明 |
| :--- | :--- | :--- | :--- | :--- |
| **Stkcd** | 证券代码 | String | 所有文件 | 统一为 6 位数字字符串 (如 `000002`) |
| **Year** | 统计年度 | Int64 | 所有文件 | 统一为 4 位整数年份 (如 `2020`) |
| **ShortName** | 证券简称 | String | 财务报表 | - |
| **Province** | 注册地省份 | String | 上市公司基本信息 | 原始省份名称 (如 `广东省`) |
| **City** | 注册地城市 | String | 上市公司基本信息 | 原始城市名称 (如 `深圳市`) |

---

## 2. 核心被解释变量 (Dependent Variable)

| 变量名 | 含义 | 计算公式/说明 | 单位 |
| :--- | :--- | :--- | :--- |
| **ROA** | 总资产净利润率 | `NetProfit` / `TotalAssets` | 小数 (如 0.05 代表 5%) |
| **NetProfit** | 净利润 | 直接读取 (`B002000000`) | 元 |
| **TotalAssets** | 资产总计 | 直接读取 (`A001000000`) | 元 |

---

## 3. 核心解释变量 (Independent Variable)

| 变量名 | 含义 | 计算公式/说明 |
| :--- | :--- | :--- |
| **Treat_time** | 数字化转型虚拟变量 | 若 `DigitalScore` > 0 则为 1，否则为 0 |
| **DigitalScore** | 数字化转型程度 | 文本挖掘词频或评分 (`DigitalTechApplication`) |

---

## 4. 控制变量 (Control Variables)

| 变量名 | 含义 | 计算公式/说明 | 经济意义 |
| :--- | :--- | :--- | :--- |
| **Size** | 企业规模 | `ln(TotalAssets)` | 控制规模效应 |
| **Lev** | 资产负债率 | `TotalLiabilities` / `TotalAssets` | 衡量财务风险 |
| **TobinQ** | 托宾Q值 | 直接读取 (`F100901A`) | 衡量市场估值与成长性 |
| **Age** | 上市年限 | `ln(CurrentYear - ListingYear + 1)` | 控制生命周期影响 |
| **Board** | 董事会规模 | `ln(Boardsize)` | 董事会人数取对数 |
| **Indb** | 独立董事比例 | `IndDirectorRatio` | 独董人数 / 董事会总人数 (%) |
| **Duality** | 两职合一 | 虚拟变量 (1=兼任, 2=不兼任) | 衡量权力集中度 |
| **Staff** | 员工人数 | 直接读取 (`StaffNumber`) | 劳动投入规模 |
| **Top1** | 第一大股东持股 | 直接读取 (`LargestHolderRate`) | 股权集中度 (%) |

---

## 5. 异质性变量 (Heterogeneity Variables)

| 变量名 | 含义 | 计算公式/说明 | 用途 |
| :--- | :--- | :--- | :--- |
| **SOE** | 产权性质 | 1=国企 (代码1开头), 0=非国企 | 分组分析国企/民企差异 |
| **GDP** | 地区经济水平 | `ln(GDP_City + 1)`，若缺则用 `GDP_Prov` | 衡量外部经济环境 |
| **GDP_City** | 城市GDP | 来源于分城市GDP表 | 亿元 |
| **GDP_Prov** | 省份GDP | 来源于分省份GDP表 | 亿元 |

---

## 📝 数据清洗逻辑备注
1.  **合并基准**：以**资产负债表** (`FS_Combas.csv`) 为主表，左连接其他所有表格。
2.  **缺失值处理**：
    *   `Stkcd` 统一补零至 6 位。
    *   `Year` 统一转为数字。
    *   `GDP` 优先使用城市级数据，缺失时使用省级数据填补。
    *   所有数值型变量强制转为 `float`，非数值字符转为 `NaN`。
3.  **变量变换**：
    *   `Size`, `Age`, `Board`, `GDP` 均进行了自然对数变换 (`ln`)，以减小异方差和极端值影响。

该数据集 (`final_data.csv`) 现已准备就绪，可直接导入 Stata 或 Python 进行回归分析。
